name: JQM CI

on: [push]

defaults:
    run:
        working-directory: ./jqm-all

jobs:
    test:
        runs-on: ubuntu-latest
        strategy:
            matrix:
                java: [ 11, 12 ]
        steps:
            - uses: actions/checkout@v2
            - name: Set up java
              uses: actions/setup-java@v1
              with:
                  java-version: ${{ matrix.java }}
            - name: Build
              run: mvn install -DskipTests
            - name: Test
              run: mvn test
            - name: Publish Test Report
              uses: EnricoMi/publish-unit-test-result-action@v1.7
              if: always()
              with:
                files: '**/TEST-*.xml'
                github_token: ${{ secrets.GITHUB_TOKEN }}

